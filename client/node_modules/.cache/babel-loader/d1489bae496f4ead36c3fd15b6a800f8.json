{"ast":null,"code":"import _objectSpread from\"/Users/nephthalimabebe/Desktop/react-todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/nephthalimabebe/Desktop/react-todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{AiFillCaretUp,AiFillCaretDown}from\"react-icons/ai\";import'./Todo.css';import TodoMenu from'./TodoMenu';import Backdrop from'./Backdrop';import Modal from'./Modal';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Todo=function Todo(_ref){var key=_ref.key,task=_ref.task,deleteTodo=_ref.deleteTodo;var url=\"https://nephthalim-react-todo.herokuapp.com\";var token=localStorage.getItem('token');var _useState=useState(false),_useState2=_slicedToArray(_useState,2),important=_useState2[0],switchImportant=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),_task=_useState4[0],setTask=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),active=_useState6[0],setActive=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showEditModal=_useState8[0],setShowEditModal=_useState8[1];function showEditModalHandler(){setShowEditModal(true);}function closeModalHandler(){setShowEditModal(false);}var markImportant=function markImportant(id){var token=localStorage.getItem(\"token\");fetch(url+\"/todo/important/\"+id,{method:'PUT',headers:{'token':token,'Accept':'application/json','Content-Type':'application/json'}}).then(function(res){if(res.status===200)return res.json();else if(res.status===403)localStorage.removeItem('token');}).then(function(){switchImportant(!important);});};var rotateCaret=function rotateCaret(){setActive(!active);};var _delete=function _delete(e){e.preventDefault();fetch(url+\"/todo/\"+_task.id,{method:'DELETE',headers:{'token':token}}).then(function(res){if(res.status===200)return res.json();else if(res.status===403)localStorage.removeItem('token');}).then(function(){deleteTodo(_task.id);});};useEffect(function(){switchImportant(task.important);setTask(task);},[]);var editTodo=function editTodo(newInfo){fetch(url+\"/todo/\"+_task.id,{method:'PUT',body:JSON.stringify(newInfo),headers:{'Accept':'application/json','Content-Type':'application/json','token':token}}).then(function(res){if(res.status===200)return res.json();else if(res.status===403)localStorage.removeItem('token');}).then(setTask(_objectSpread(_objectSpread({id:_task.id},newInfo),{},{important:_task.important,date_created:_task.date_created})));};return/*#__PURE__*/_jsxs(\"div\",{className:\"container \".concat(important?\"important\":null),onDoubleClick:function onDoubleClick(){if(!showEditModal)markImportant(_task.id);},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:_task.name}),/*#__PURE__*/_jsx(\"div\",{onClick:rotateCaret,children:active?/*#__PURE__*/_jsx(AiFillCaretDown,{}):/*#__PURE__*/_jsx(AiFillCaretUp,{})})]}),/*#__PURE__*/_jsx(\"div\",{children:active?/*#__PURE__*/_jsx(TodoMenu,{deleteTodo:_delete,showModalHandler:showEditModalHandler}):null}),/*#__PURE__*/_jsx(\"p\",{className:\"description\",children:_task.description}),/*#__PURE__*/_jsx(\"div\",{className:\"date\",children:_task.date_created}),showEditModal&&/*#__PURE__*/_jsx(Backdrop,{onClick:closeModalHandler}),showEditModal&&/*#__PURE__*/_jsx(Modal,{text:'Edit',onClose:closeModalHandler,data:_task,onConfirm:editTodo})]});};export default Todo;","map":{"version":3,"sources":["/Users/nephthalimabebe/Desktop/react-todo/client/src/components/Dashboard/Todo.js"],"names":["React","useState","useEffect","AiFillCaretUp","AiFillCaretDown","TodoMenu","Backdrop","Modal","Todo","key","task","deleteTodo","url","token","localStorage","getItem","important","switchImportant","_task","setTask","active","setActive","showEditModal","setShowEditModal","showEditModalHandler","closeModalHandler","markImportant","id","fetch","method","headers","then","res","status","json","removeItem","rotateCaret","_delete","e","preventDefault","editTodo","newInfo","body","JSON","stringify","date_created","name","description"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { AiFillCaretUp, AiFillCaretDown } from \"react-icons/ai\";\nimport './Todo.css'\nimport TodoMenu from './TodoMenu';\nimport Backdrop from './Backdrop';\nimport Modal from './Modal';\n\nconst Todo = ({ key, task, deleteTodo }) => {\n    const url =\"https://nephthalim-react-todo.herokuapp.com\"\n    const token = localStorage.getItem('token');\n    const [important, switchImportant] = useState(false);\n    const [_task, setTask] = useState(false);\n    const [active, setActive] = useState(false);\n    const [showEditModal, setShowEditModal] = useState(false);\n    \n\n    function showEditModalHandler() {\n        setShowEditModal(true);\n    }\n\n\n    function closeModalHandler() {\n        setShowEditModal(false);\n    }\n\n\n    const markImportant = (id) => {\n        const token = localStorage.getItem(\"token\")\n\n        fetch(\n            url + \"/todo/important/\" + id,\n            {\n                method: 'PUT',\n                headers: {\n                    'token': token,\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json',\n                }\n            }\n\n        ).then((res) => {\n            if (res.status === 200) return res.json();\n            else if (res.status === 403) localStorage.removeItem('token')\n\n        }).then(() => {\n            switchImportant(!important)\n\n        })\n    }\n\n    const rotateCaret = () => {\n        setActive(!active)\n    }\n\n    const _delete = (e) => {\n        e.preventDefault();\n\n        fetch(\n            url + \"/todo/\" + _task.id,\n            {\n                method: 'DELETE',\n                headers: {\n                    'token': token,\n                }\n            }\n\n        ).then((res) => {\n            if (res.status === 200) return res.json();\n            else if (res.status === 403) localStorage.removeItem('token')\n\n        }).then(() => {\n            deleteTodo(_task.id);\n        })\n    }\n\n    useEffect(() => {\n        switchImportant(task.important);\n        setTask(task);\n    }, [])\n\n    const editTodo = (newInfo) => {\n\n        fetch(\n            url + \"/todo/\" + _task.id,\n            {\n                method: 'PUT',\n                body: JSON.stringify(newInfo),\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json',\n                    'token': token,\n                }\n            }\n\n        ).then((res) => {\n            if (res.status === 200) return res.json();\n            else if (res.status === 403) localStorage.removeItem('token')\n\n        }).then(setTask({ id: _task.id, ...newInfo, important: _task.important, date_created: _task.date_created }))\n    }\n\n    return (\n\n        <div className={`container ${important ? \"important\" : null}`} onDoubleClick={() => { if (!showEditModal) markImportant(_task.id) }}>\n            <div className=\"header\">\n                <h3>{_task.name}</h3>\n                <div onClick={rotateCaret}>{active ? <AiFillCaretDown /> : <AiFillCaretUp />}</div>\n\n            </div>\n            <div>\n                {active ?\n                    <TodoMenu deleteTodo={_delete} showModalHandler={showEditModalHandler} /> : null\n                }\n            </div>\n            <p className=\"description\">{_task.description}</p>\n            <div className=\"date\">{_task.date_created}</div>\n            {(showEditModal) && <Backdrop onClick={closeModalHandler} />}\n            {showEditModal && <Modal text={'Edit'} onClose={closeModalHandler} data={_task} onConfirm={editTodo} />}\n            \n        </div >\n\n    )\n}\n\nexport default Todo\n"]},"metadata":{},"sourceType":"module"}