(this["webpackJsonpreact-todo"]=this["webpackJsonpreact-todo"]||[]).push([[0],{37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var c=n(1),o=n(14),s=n.n(o),a=n(5),r=n(3),i=n(2),l=function(e){var t=e.loginUser,n=Object(c.useState)(""),o=Object(a.a)(n,2),s=(o[0],o[1]),l=Object(r.g)(),u=Object(c.useRef)(),j=Object(c.useRef)();return Object(i.jsx)("div",{children:Object(i.jsxs)("form",{className:"w-50 mx-auto",children:[Object(i.jsx)("input",{ref:u,type:"email",className:"form-control my-3",name:"email",placeholder:"Email"}),Object(i.jsx)("input",{ref:j,type:"password",className:"form-control my-3",name:"password",placeholder:"Password"}),Object(i.jsx)("input",{type:"submit",className:"btn btn-primary w-100 my-3",onClick:function(e){e.preventDefault();var n={email:u.current.value,password:j.current.value},c=JSON.stringify(n);t(c,s)}}),Object(i.jsx)("button",{type:"button",className:"btn btn-success w-100 my-3",onClick:function(){l.push("/register")},children:"Register"})]})})},u=(n(23),function(e){var t=e.setAuthentication,n=e.toaster;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h1",{className:"text-center my-5",children:"Login"}),Object(i.jsx)(l,{loginUser:function(e){fetch("http://localhost:5000/auth/login",{method:"POST",body:e,headers:{"Content-Type":"application/json"}}).then((function(e){if(200===e.status)return e.json();401===e.status?n.error("\ud83d\ude41 Please make sure you are using the right credentials!"):500===e.status&&n.error("\ud83d\ude41 Seems like there is a server error \u2639\ufe0f! Try again some other time")})).then((function(e){e.token&&(localStorage.setItem("token",e.token),n.success(),t(!0))})).catch((function(e){console.log(e)}))}})]})}),j=(n(37),n(38),function(e){var t=e.searchTask,n=Object(c.useRef)();return Object(i.jsx)("form",{className:"searchBar",children:Object(i.jsx)("input",{ref:n,className:"form-control mr-sm-2",type:"search",placeholder:"Search","aria-label":"Search",onChange:function(e){e.preventDefault();var c=n.current.value;t({query:c})}})})}),d=function(e){var t=e.name,n=e.setAuthentication,c=e.searchTask;return Object(i.jsxs)("div",{className:"navbar-collapse _navbar",children:[Object(i.jsx)("h1",{className:"_nav-name",children:t.toUpperCase()}),Object(i.jsx)(j,{searchTask:c}),Object(i.jsx)("button",{className:"_nav-btn",onClick:function(e){e.preventDefault(),localStorage.removeItem("token"),n(!1)},children:" Logout "})]})},m=n(26),b=n(25),h=(n(39),n(40),function(e){var t=e.text,n=e.onConfirm,o=e.onClose,s=e.data,a=Object(c.useRef)(),r=Object(c.useRef)(),l=function(e){e.preventDefault();var t={name:a.current.value,description:r.current.value};console.log(t),n(t),o()};return Object(i.jsxs)("div",{className:"-modal",children:[Object(i.jsx)("p",{children:t}),Object(i.jsx)("form",{className:"form",children:s?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{className:"form-item",children:[Object(i.jsx)("label",{children:"Name"}),Object(i.jsx)("input",{ref:a,className:"form-input form-control",type:"text",defaultValue:s.name})]}),Object(i.jsxs)("div",{className:"form-item",children:[Object(i.jsx)("label",{children:"Description"}),Object(i.jsx)("input",{ref:r,className:"form-input form-control",type:"text",defaultValue:s.description})]}),Object(i.jsxs)("div",{className:"form-btns",children:[Object(i.jsx)("input",{type:"submit",className:"-btn",title:"Confirm",onClick:l}),Object(i.jsx)("button",{className:"-btn -btn--alt",onClick:o,children:"Cancel"})]})]}):Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{className:"form-block",children:[Object(i.jsx)("input",{className:"form-input form-control",type:"text",ref:a,placeholder:"Name"}),Object(i.jsx)("input",{className:"form-input form-control",type:"text",ref:r,placeholder:"Description"})]}),Object(i.jsxs)("div",{className:"form-btns",children:[Object(i.jsx)("input",{type:"submit",className:"-btn",title:"Confirm",onClick:l}),Object(i.jsx)("button",{className:"-btn -btn--alt",onClick:o,children:"Cancel"})]})]})})]})}),f=(n(41),function(e){var t=e.onClick;return Object(i.jsx)("div",{className:"backdrop",onClick:t})}),O=function(e){var t=e.setTodos,n=e.todos,o=Object(c.useState)(!1),s=Object(a.a)(o,2),r=s[0],l=s[1],u=localStorage.getItem("token");function j(){l(!1)}return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{className:"-btn_add",onClick:function(){l(!0)},children:Object(i.jsx)(b.a,{})}),r&&Object(i.jsx)(f,{onClick:j}),r&&Object(i.jsx)(h,{text:"Add",onClose:j,onConfirm:function(e){fetch("http://localhost:5000/todo",{method:"POST",body:JSON.stringify(e),headers:{Accept:"application/json","Content-Type":"application/json",token:u}}).then((function(e){if(200===e.status)return e.json();403===e.status&&localStorage.removeItem("token")})).then((function(e){t([].concat(Object(m.a)(n),[e.todo]))}))}})]})},p=n(21),x=n(20),g=(n(42),n(43),function(e){var t=e.showModalHandler,n=e.deleteTodo;return Object(i.jsxs)("div",{className:"popup",children:[Object(i.jsx)("a",{onClick:t,children:"Edit"}),Object(i.jsx)("a",{onClick:n,children:"Delete"})]})}),v=function(e){e.key;var t=e.task,n=e.deleteTodo,o="http://localhost:5000",s=localStorage.getItem("token"),r=Object(c.useState)(!1),l=Object(a.a)(r,2),u=l[0],j=l[1],d=Object(c.useState)(!1),m=Object(a.a)(d,2),b=m[0],O=m[1],v=Object(c.useState)(!1),k=Object(a.a)(v,2),N=k[0],y=k[1],S=Object(c.useState)(!1),C=Object(a.a)(S,2),T=C[0],w=C[1];function I(){w(!1)}Object(c.useEffect)((function(){j(t.important),O(t)}),[]);return Object(i.jsxs)("div",{className:"container ".concat(u?"important":null),onDoubleClick:function(){T||function(e){var t=localStorage.getItem("token");fetch("http://localhost:5000/important/"+e,{method:"PUT",headers:{token:t}}).then((function(e){if(200===e.status)return e.json();403===e.status&&localStorage.removeItem("token")})).then((function(){j(!u)}))}(b.id)},children:[Object(i.jsxs)("div",{className:"header",children:[Object(i.jsx)("h3",{children:b.name}),Object(i.jsx)("div",{onClick:function(){y(!N)},children:N?Object(i.jsx)(x.a,{}):Object(i.jsx)(x.b,{})})]}),Object(i.jsx)("div",{children:N?Object(i.jsx)(g,{deleteTodo:function(e){e.preventDefault(),fetch(o+"/todo/"+b.id,{method:"DELETE",headers:{token:s}}).then((function(e){if(200===e.status)return e.json();403===e.status&&localStorage.removeItem("token")})).then((function(){n(b.id)}))},showModalHandler:function(){w(!0)}}):null}),Object(i.jsx)("p",{className:"description",children:b.description}),Object(i.jsx)("div",{className:"date",children:b.date_created}),T&&Object(i.jsx)(f,{onClick:I}),T&&Object(i.jsx)(h,{text:"Edit",onClose:I,data:b,onConfirm:function(e){fetch(o+"/todo/"+b.id,{method:"PUT",body:JSON.stringify(e),headers:{Accept:"application/json","Content-Type":"application/json",token:s}}).then((function(e){if(200===e.status)return e.json();403===e.status&&localStorage.removeItem("token")})).then(O(Object(p.a)(Object(p.a)({id:b.id},e),{},{important:b.important,date_created:b.date_created})))}})]})},k=(n(44),function(e){var t=e.todos,n=e.deleteTodo;return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)("div",{className:"grid",children:t.map((function(e){return Object(i.jsx)(v,{task:e,deleteTodo:n},e.id)}))})})}),N=function(e){var t=e.setAuthentication,n=Object(c.useState)([]),o=Object(a.a)(n,2),s=o[0],r=o[1],l=Object(c.useState)(!0),u=Object(a.a)(l,2),j=u[0],m=u[1],b=Object(c.useState)({name:""}),h=Object(a.a)(b,2),f=h[0],p=h[1],x=localStorage.getItem("token"),g="http://localhost:5000";return Object(c.useEffect)((function(){m(!0),fetch(g+"/",{method:"GET",headers:{token:x}}).then((function(e){if(200===e.status)return e.json();403===e.status&&(localStorage.removeItem("token"),t(!1))})).then((function(e){p({name:e.name})})).catch((function(e){localStorage.removeItem("token"),t(!1)})),fetch(g+"/todo",{method:"GET",headers:{token:x}}).then((function(e){return e.json()})).then((function(e){r(e.todos)})).catch((function(e){localStorage.removeItem("token"),t(!1)})),m(!1)}),[]),j?Object(i.jsx)("section",{children:Object(i.jsx)("p",{children:"Loading..."})}):Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(d,{name:f.name,setAuthentication:t,searchTask:function(e){console.log("Searching ".concat(e)),fetch(g+"/search?query="+e.query,{method:"GET",headers:{"Content-Type":"application/json",token:x}}).then((function(e){return e.json()})).then((function(e){r(e.searchResult)})).catch((function(e){localStorage.removeItem("token"),t(!1)}))}}),Object(i.jsx)(k,{todos:s,deleteTodo:function(e){r(s.filter((function(t){return t.id!==e})))}}),Object(i.jsx)(O,{setTodos:r,todos:s})]})},y=function(e){var t=e.addUser,n=Object(c.useRef)(),o=Object(c.useRef)(),s=Object(c.useRef)();return Object(i.jsxs)("form",{className:"w-50 mx-auto",children:[Object(i.jsx)("input",{ref:n,type:"text",className:"form-control my-3",name:"name",placeholder:"Name"}),Object(i.jsx)("input",{ref:o,type:"email",className:"form-control my-3",name:"email",placeholder:"Email"}),Object(i.jsx)("input",{ref:s,type:"password",className:"form-control my-3",name:"password",placeholder:"Password"}),Object(i.jsx)("input",{type:"submit",className:"btn btn-success w-100",onClick:function(e){e.preventDefault();var c={name:n.current.value.toString(),email:o.current.value.toString(),password:s.current.value.toString()},a=JSON.stringify(c);t(a)}})]})},S=function(){var e=Object(r.g)();return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h1",{className:"text-center my-5",children:"Register"}),Object(i.jsx)(y,{addUser:function(t){fetch("http://localhost:5000/auth/register",{method:"POST",body:t,headers:{"Content-Type":"application/json"}}).then((function(e){if(200===e.status)return e.json()})).then((function(e){localStorage.setItem("token",e.token)})).catch((function(t){e.replace("/register")}));var n=localStorage.getItem("token");void 0!==n&&""!==n&&e.replace("/")}})]})},C=n(13);n(45);var T=function(){var e=Object(c.useState)(!1),t=Object(a.a)(e,2),n=t[0],o=t[1],s=localStorage.getItem("token");Object(c.useEffect)((function(){s&&""!=s&&void 0!=s&&o(!0)}));var l={success:function(){return C.b.success("\ud83c\udf89 You have successfuly logged in.",{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},error:function(e){return C.b.error(e,{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}};return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)(r.d,{children:[Object(i.jsx)(r.b,{path:"/",exact:!0,children:n?Object(i.jsx)(N,{setAuthentication:o}):Object(i.jsx)(u,{setAuthentication:o,toaster:l})}),Object(i.jsx)(r.b,{path:"/register",exact:!0,children:s?Object(i.jsx)(r.a,{to:"/"}):Object(i.jsx)(S,{})}),Object(i.jsx)(r.b,{path:"*",children:Object(i.jsx)(r.a,{to:"/"})})]}),Object(i.jsx)(C.a,{position:"bottom-right",autoClose:2500,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})},w=n(10);s.a.render(Object(i.jsx)(w.a,{children:Object(i.jsx)(T,{})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.44b79105.chunk.js.map